# Add your test case here for debugging and run go test -run=One.
"select * from ((select id from user union select id+1 from user) union select user_id from user_extra) as t"
{
  "QueryType": "SELECT",
  "Original": "select * from ((select id from user union select id+1 from user) union select user_id from user_extra) as t",
  "Instructions": {
    "OperatorType": "SimpleProjection",
    "Columns": [
      0
    ],
    "Inputs": [
      {
        "OperatorType": "Distinct",
        "Inputs": [
          {
            "OperatorType": "Concatenate",
            "Inputs": [
              {
                "OperatorType": "Distinct",
                "Inputs": [
                  {
                    "OperatorType": "Concatenate",
                    "Inputs": [
                      {
                        "OperatorType": "Route",
                        "Variant": "SelectScatter",
                        "Keyspace": {
                          "Name": "user",
                          "Sharded": true
                        },
                        "FieldQuery": "select id from `user` where 1 != 1",
                        "Query": "select id from `user`",
                        "Table": "`user`"
                      },
                      {
                        "OperatorType": "Route",
                        "Variant": "SelectScatter",
                        "Keyspace": {
                          "Name": "user",
                          "Sharded": true
                        },
                        "FieldQuery": "select id + 1 from `user` where 1 != 1",
                        "Query": "select id + 1 from `user`",
                        "Table": "`user`"
                      }
                    ]
                  }
                ]
              },
              {
                "OperatorType": "Route",
                "Variant": "SelectScatter",
                "Keyspace": {
                  "Name": "user",
                  "Sharded": true
                },
                "FieldQuery": "select user_id from user_extra where 1 != 1",
                "Query": "select user_id from user_extra",
                "Table": "user_extra"
              }
            ]
          }
        ]
      }
    ]
  }
}
{
  "QueryType": "SELECT",
  "Original": "select * from ((select id from user union select id+1 from user) union select user_id from user_extra) as t",
  "Instructions": {
    "OperatorType": "SimpleProjection",
    "Columns": [
      0
    ],
    "Inputs": [
      {
        "OperatorType": "Distinct",
        "Inputs": [
          {
            "OperatorType": "Route",
            "Variant": "SelectScatter",
            "Keyspace": {
              "Name": "user",
              "Sharded": true
            },
            "FieldQuery": "(select id from `user` where 1 != 1) union all (select id + 1 from `user` where 1 != 1) union (select user_id from user_extra where 1 != 1)",
            "Query": "(select id from `user`) union all (select id + 1 from `user`) union (select user_id from user_extra)",
            "Table": "`user`"
          }
        ]
      }
    ]
  }
}
